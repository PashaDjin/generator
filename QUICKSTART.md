# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ë–∏—Ç—Ä–∏–∫—Å24

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (5 –º–∏–Ω—É—Ç)

### 1Ô∏è‚É£ –ù–∞—Å—Ç—Ä–æ–π –∫–æ–Ω—Ñ–∏–≥ –≤ Google Sheets

–û—Ç–∫—Ä–æ–π —Ç–∞–±–ª–∏—Ü—É, –ø–µ—Ä–µ–π–¥–∏ –Ω–∞ –ª–∏—Å—Ç **"–¢–µ—Ö"** –∏ –∑–∞–ø–æ–ª–Ω–∏:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ L2  ‚îÇ ID —à–∞–±–ª–æ–Ω–∞ —Å–º–µ—Ç—ã (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!)   ‚îÇ
‚îÇ L3  ‚îÇ –ë–†–ï–ù–î-–ú–ê–† / –°–¢–†–û–ô–ú–ê–¢               ‚îÇ
‚îÇ L4  ‚îÇ –ú–µ–Ω–µ–¥–∂–µ—Ä (–∏–º—è)                     ‚îÇ
‚îÇ L5  ‚îÇ –ó–∞–º–µ—Ä—â–∏–∫ (–∏–º—è)                     ‚îÇ
‚îÇ L6  ‚îÇ ID –ø–∞–ø–∫–∏ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!)  ‚îÇ
‚îÇ L7  ‚îÇ Email –∑–∞–º–µ—Ä—â–∏–∫–∞ (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!)     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ö–∞–∫ –Ω–∞–π—Ç–∏ ID —à–∞–±–ª–æ–Ω–∞ –∏ –ø–∞–ø–∫–∏:**
- –û—Ç–∫—Ä–æ–π —Ñ–∞–π–ª/–ø–∞–ø–∫—É –≤ Google Drive
- –°–∫–æ–ø–∏—Ä—É–π –∏–∑ URL: `https://drive.google.com/drive/folders/{ID}`

---

### 2Ô∏è‚É£ –î–µ–ø–ª–æ–π –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
# –í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
clasp deploy --description "Bitrix24 Integration v1"

# –ò–ª–∏ —á–µ—Ä–µ–∑ –≤–µ–±: https://script.google.com
# ‚Üí –ü—Ä–æ–µ–∫—Ç ‚Üí –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å ‚Üí –ù–æ–≤–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ ‚Üí –í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
```

**–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–µ–ø–ª–æ—è:**
- –¢–∏–ø: **–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**
- –ó–∞–ø—É—Å–∫ –æ—Ç –∏–º–µ–Ω–∏: **–Ø**
- –î–æ—Å—Ç—É–ø: **–í—Å–µ**

**–°–∫–æ–ø–∏—Ä—É–π URL:** `https://script.google.com/macros/s/{DEPLOY_ID}/exec`

---

### 3Ô∏è‚É£ –°–æ–∑–¥–∞–π –ø–æ–ª—è –≤ –ë–∏—Ç—Ä–∏–∫—Å24

**CRM ‚Üí –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø–æ–ª—è ‚Üí –°–¥–µ–ª–∫–∞**

–°–æ–∑–¥–∞–π 3 –ø–æ–ª—è:

| –ù–∞–∑–≤–∞–Ω–∏–µ | –ö–æ–¥ | –¢–∏–ø |
|----------|-----|-----|
| UID —Å–º–µ—Ç—ã | `UF_CRM_SMETA_UID` | –°—Ç—Ä–æ–∫–∞ |
| –°—Å—ã–ª–∫–∞ –Ω–∞ —Å–º–µ—Ç—É | `UF_CRM_SMETA_LINK` | –°—Å—ã–ª–∫–∞ |
| –ü–∞–ø–∫–∞ –∫–ª–∏–µ–Ω—Ç–∞ | `UF_CRM_FOLDER_LINK` | –°—Å—ã–ª–∫–∞ |

---

### 4Ô∏è‚É£ –ù–∞—Å—Ç—Ä–æ–π –≤–µ–±—Ö—É–∫–∏ –≤ –ë–∏—Ç—Ä–∏–∫—Å24

#### A. –ò—Å—Ö–æ–¥—è—â–∏–π –≤–µ–±—Ö—É–∫ (–æ—Ç–ø—Ä–∞–≤–∫–∞ –í GAS)

**–ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è ‚Üí –í–µ–±—Ö—É–∫–∏ ‚Üí –ò—Å—Ö–æ–¥—è—â–∏–π –≤–µ–±—Ö—É–∫ ‚Üí + –î–æ–±–∞–≤–∏—Ç—å**

**–ù–∞—Å—Ç—Ä–æ–π–∫–∏:**
- –ù–∞–∑–≤–∞–Ω–∏–µ: `–°–æ–∑–¥–∞–Ω–∏–µ —Å–º–µ—Ç—ã`
- URL: `{–°–ö–û–ü–ò–†–û–í–ê–ù–ù–´–ô URL –ò–ó GAS}`
- –°–æ–±—ã—Ç–∏–µ: `–ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å–¥–µ–ª–∫–∏`
- –§–∏–ª—å—Ç—Ä: –°—Ç–∞–¥–∏—è = "–î–µ–ª–∞–µ–º —Å–º–µ—Ç—É"

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (JSON):**
```json
{
  "bitrixDealId": "{=Document:ID}",
  "client": "{=Document:TITLE}",
  "address": "{=Document:UF_CRM_ADDRESS}",
  "phone": "{=Document:PHONE[0].VALUE}",
  "bitrixWebhookUrl": "https://your-domain.bitrix24.ru/rest/1/{WEBHOOK_TOKEN}/"
}
```

#### B. –í—Ö–æ–¥—è—â–∏–π –≤–µ–±—Ö—É–∫ (–ø–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞)

**–ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è ‚Üí –í–µ–±—Ö—É–∫–∏ ‚Üí –í—Ö–æ–¥—è—â–∏–π –≤–µ–±—Ö—É–∫ ‚Üí + –î–æ–±–∞–≤–∏—Ç—å**

**–ü—Ä–∞–≤–∞:**
- ‚úÖ `crm`
- ‚úÖ `crm.deal.update`

**–°–∫–æ–ø–∏—Ä—É–π URL:** `https://your-domain.bitrix24.ru/rest/1/{TOKEN}/`

–í—Å—Ç–∞–≤—å —ç—Ç–æ—Ç URL –≤ `bitrixWebhookUrl` (—Å–º. –≤—ã—à–µ)

---

## üß™ –¢–µ—Å—Ç

### –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ Apps Script

1. –û—Ç–∫—Ä–æ–π [script.google.com](https://script.google.com/home/projects/1EQiHV_ehdInMzIPRz_SKw63gvD0_XTwqHsGHCQdmsh6RSWjFU_fOwXwI)
2. –§–∞–π–ª `7_WebhookBitrix.js` ‚Üí —Ñ—É–Ω–∫—Ü–∏—è `testWebhook()`
3. –ó–∞–ø—É—Å—Ç–∏ (‚ñ∂Ô∏è)
4. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏: **View ‚Üí Logs**

### –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ –ë–∏—Ç—Ä–∏–∫—Å24

1. –û—Ç–∫—Ä–æ–π –ª—é–±—É—é —Å–¥–µ–ª–∫—É
2. –ó–∞–ø–æ–ª–Ω–∏ –ø–æ–ª—è: **–ù–∞–∑–≤–∞–Ω–∏–µ**, **–ê–¥—Ä–µ—Å**, **–¢–µ–ª–µ—Ñ–æ–Ω**
3. –ü–µ—Ä–µ–≤–µ–¥–∏ –≤ —Å—Ç–∞–¥–∏—é **"–î–µ–ª–∞–µ–º —Å–º–µ—Ç—É"**
4. –ß–µ—Ä–µ–∑ 5-10 —Å–µ–∫—É–Ω–¥ –æ–±–Ω–æ–≤–∏—Ç—Å—è:
   - ‚úÖ –ü–æ–ª–µ **"UID —Å–º–µ—Ç—ã"**
   - ‚úÖ –ü–æ–ª–µ **"–°—Å—ã–ª–∫–∞ –Ω–∞ —Å–º–µ—Ç—É"** (–∫–ª–∏–∫–∞–±–µ–ª—å–Ω–∞!)
   - ‚úÖ –ü–æ–ª–µ **"–ü–∞–ø–∫–∞ –∫–ª–∏–µ–Ω—Ç–∞"**

---

## üìä –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–º–µ—Ç—ã

```
–ë–∏—Ç—Ä–∏–∫—Å (ID —Å–¥–µ–ª–∫–∏: 12345)
    ‚Üì
GAS (UID = BITRIX-12345)
    ‚Üì
–°–æ–∑–¥–∞—ë—Ç:
    ‚Ä¢ –ü–∞–ø–∫—É: "BITRIX-12345 - –ú–æ—Å–∫–≤–∞, —É–ª... - –ò–≤–∞–Ω–æ–≤"
    ‚Ä¢ –°–º–µ—Ç—É: "BITRIX-12345 - –°–º–µ—Ç–∞ - –ò–≤–∞–Ω–æ–≤.xlsx"
    ‚Ä¢ –í—ã–¥–∞—ë—Ç –¥–æ—Å—Ç—É–ø –∑–∞–º–µ—Ä—â–∏–∫—É
    ‚Ä¢ –ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤ —Ç–∞–±–ª–∏—Ü—É –û–ë–™–ï–ö–¢–´
    ‚Ä¢ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç —Å –¢–†–ê–ù–ó–ò–¢
    ‚Üì
–ë–∏—Ç—Ä–∏–∫—Å (–æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –ø–æ–ª—è —Å–¥–µ–ª–∫–∏)
```

---

## ‚ùó –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

| –ü—Ä–æ–±–ª–µ–º–∞ | –ü—Ä–∏—á–∏–Ω–∞ | –†–µ—à–µ–Ω–∏–µ |
|----------|---------|---------|
| –û—à–∏–±–∫–∞: "managerFolderId –ø—É—Å—Ç" | –ù–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∞ —è—á–µ–π–∫–∞ –¢–µ—Ö!L6 | –£–∫–∞–∂–∏ ID –ø–∞–ø–∫–∏ –≤ Drive |
| –û—à–∏–±–∫–∞: "templateId –ø—É—Å—Ç" | –ù–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∞ —è—á–µ–π–∫–∞ –¢–µ—Ö!L2 | –£–∫–∞–∂–∏ ID —à–∞–±–ª–æ–Ω–∞ —Å–º–µ—Ç—ã |
| –û—à–∏–±–∫–∞: "measurerEmail –ø—É—Å—Ç" | –ù–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∞ —è—á–µ–π–∫–∞ –¢–µ—Ö!L7 | –£–∫–∞–∂–∏ email –∑–∞–º–µ—Ä—â–∏–∫–∞ |
| –ë–∏—Ç—Ä–∏–∫—Å –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è | –ù–µ–≤–µ—Ä–Ω—ã–π webhook URL | –ü—Ä–æ–≤–µ—Ä—å –≤—Ö–æ–¥—è—â–∏–π –≤–µ–±—Ö—É–∫ |
| 401 Unauthorized | –î–µ–ø–ª–æ–π –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω | –ü–µ—Ä–µ—Å–æ–∑–¥–∞–π —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ |

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

**–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** [BITRIX_INTEGRATION.md](BITRIX_INTEGRATION.md)

**–ü—Ä–æ–µ–∫—Ç GAS:** https://script.google.com/home/projects/1EQiHV_ehdInMzIPRz_SKw63gvD0_XTwqHsGHCQdmsh6RSWjFU_fOwXwI

**–õ–æ–≥–∏:** View ‚Üí Logs (Ctrl+Enter)

---

**–ì–æ—Ç–æ–≤–æ!** –¢–µ–ø–µ—Ä—å —Å–º–µ—Ç—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–µ–≤–æ–¥–µ —Å–¥–µ–ª–∫–∏ –≤ –Ω—É–∂–Ω—É—é —Å—Ç–∞–¥–∏—é. üéâ
